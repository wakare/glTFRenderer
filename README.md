This is repo for learning glTF format description and graphics api

Works:
1. Load simple gltf file (single triangle), convert inner geometry and material structure and render it with DX12

2. ......

Tips:
1. glTF official website
https://github.com/KhronosGroup/glTF-Tutorials/tree/master/gltfTutorial

2. web glTF viewer
https://gltf-viewer.donmccurdy.com/

Claudeæ¢³ç†æ–‡æ¡£ï¼š
  ğŸ¯ æ¨¡å—æ¦‚è§ˆ

  ä½ çš„æ¸²æŸ“å™¨é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œå…±æœ‰5ä¸ªä¸»è¦æ¨¡å—ï¼š

  RendererDemo (åº”ç”¨å±‚)
      â†“
  RendererCore (æ¸²æŸ“æ¡†æ¶å±‚)
      â†“
  RHICore (ç¡¬ä»¶æŠ½è±¡å±‚) + RendererScene (åœºæ™¯æ•°æ®å±‚)
      â†“
  RendererCommonLib (åŸºç¡€å±‚)

  ---
  ğŸ“¦ å„æ¨¡å—è¯¦ç»†è®¾è®¡

  1. RendererCommonLib (åŸºç¡€è®¾æ–½å±‚)

  èŒè´£ï¼šæä¾›é€šç”¨å·¥å…·å’ŒåŸºç¡€åŠŸèƒ½

  ä¸»è¦ç»„ä»¶ï¼š
  - çª—å£ç®¡ç†ï¼šglTFWindow (åŸºäºGLFW)
  - glTFåŠ è½½å™¨ï¼šglTFLoader - è§£æglTF 2.0æ–‡ä»¶
  - å›¾åƒåŠ è½½ï¼šglTFImageIOUtil - æ”¯æŒå¤šç§å›¾åƒæ ¼å¼
  - è¾“å…¥å¤„ç†ï¼šRendererInputDevice
  - é€šç”¨å·¥å…·ï¼šæ—¥å¿—ã€å¼‚æ­¥æ–‡ä»¶åŠ è½½ã€å”¯ä¸€IDç”Ÿæˆ

  ä¾èµ–ï¼šglfw, nlohmann_json, stb_image

  ---
  2. RHICore (æ¸²æŸ“ç¡¬ä»¶æ¥å£å±‚)

  èŒè´£ï¼šæŠ½è±¡DirectX 12å’ŒVulkanï¼Œæä¾›ç»Ÿä¸€çš„å›¾å½¢API

  æ¶æ„æ¨¡å¼ï¼šæŠ½è±¡å·¥å‚ + ç­–ç•¥æ¨¡å¼

  æ ¸å¿ƒè®¾è®¡ï¼š
  - æ¥å£å±‚ (RHIInterface/)ï¼šå®šä¹‰æ‰€æœ‰GPUèµ„æºçš„æŠ½è±¡æ¥å£
    - è®¾å¤‡ï¼šIRHIDevice, IRHIFactory
    - å‘½ä»¤ï¼šIRHICommandList, IRHICommandQueue
    - èµ„æºï¼šIRHIBuffer, IRHITexture
    - ç®¡çº¿ï¼šIRHIPipelineStateObject, IRHIRootSignature
    - æè¿°ç¬¦ï¼šIRHIDescriptorManager
  - åŒåç«¯å®ç°ï¼š
    - RHIDX12Impl/ï¼šå®Œæ•´çš„DX12å®ç°
    - RHIVKImpl/ï¼šå®Œæ•´çš„Vulkanå®ç°

  å…³é”®ç‰¹æ€§ï¼š
  - è¿è¡Œæ—¶å¯åˆ‡æ¢DX12/Vulkan
  - è‡ªåŠ¨èµ„æºçŠ¶æ€è·Ÿè¸ªå’Œè½¬æ¢
  - ç»Ÿä¸€çš„å†…å­˜ç®¡ç† (D3D12MA / VMA)
  - Shaderåå°„å’Œæ ¹ç­¾åç”Ÿæˆ

  ---
  3. RendererScene (åœºæ™¯æ•°æ®å±‚)

  èŒè´£ï¼šåœºæ™¯å›¾ç®¡ç†å’Œç½‘æ ¼/æè´¨æ•°æ®ç»“æ„

  æ¶æ„æ¨¡å¼ï¼šç»„åˆæ¨¡å¼ï¼ˆåœºæ™¯å›¾ï¼‰+ æ•°æ®å¯¼å‘è®¾è®¡

  ä¸»è¦ç±»ï¼š
  - RendererSceneGraphï¼šåœºæ™¯æ ¹èŠ‚ç‚¹å®¹å™¨
  - RendererSceneNodeï¼šåœºæ™¯èŠ‚ç‚¹ï¼ˆå±‚æ¬¡ç»“æ„ã€å˜æ¢ã€ç½‘æ ¼ï¼‰
  - RendererSceneNodeTransformï¼šTRSå˜æ¢ï¼ˆæ”¯æŒå››å…ƒæ•°ã€è„æ ‡è®°ä¼˜åŒ–ï¼‰
  - RendererSceneMeshï¼šç½‘æ ¼æ•°æ®ï¼ˆé¡¶ç‚¹ã€ç´¢å¼•ã€æè´¨ã€åŒ…å›´ç›’ï¼‰
  - RendererSceneAABBï¼šè½´å¯¹é½åŒ…å›´ç›’

  æ•°æ®æµï¼š
  glTFLoader â†’ RendererSceneGraph â†’ RendererSceneNode â†’ RendererSceneMesh

  ä¼˜åŒ–è®¾è®¡ï¼š
  - è„æ ‡è®°ç³»ç»Ÿï¼šå»¶è¿Ÿè®¡ç®—å˜æ¢çŸ©é˜µ
  - å±‚æ¬¡åŒ–å˜æ¢ä¼ æ’­
  - ä»…ä½ç½®ç¼“å†²ä¼˜åŒ–ï¼ˆç”¨äºé˜´å½±æ¸²æŸ“ï¼‰

  ---
  4. RendererCore (æ¸²æŸ“æ¡†æ¶å±‚)

  èŒè´£ï¼šé«˜å±‚æ¸²æŸ“æ¡†æ¶ã€æ¸²æŸ“å›¾ã€èµ„æºç®¡ç†

  æ¶æ„æ¨¡å¼ï¼šæ¸²æŸ“å›¾ + å¥æŸ„ç³»ç»Ÿ + èµ„æºç®¡ç†å™¨

  æ ¸å¿ƒç»„ä»¶ï¼š

  1. èµ„æºç³»ç»Ÿï¼š
    - ResourceOperatorï¼šå…¬å…±APIï¼ˆèµ„æºåˆ›å»ºå·¥å‚ï¼‰
    - ResourceManagerï¼šå†…éƒ¨èµ„æºç®¡ç†ï¼ˆè®¾å¤‡ã€äº¤æ¢é“¾ã€ç€è‰²å™¨ç¼–è¯‘ï¼‰
    - å¥æŸ„ç³»ç»Ÿï¼šç±»å‹å®‰å…¨çš„èµ„æºè®¿é—®ï¼ˆShaderHandle, TextureHandleç­‰ï¼‰
  2. æ¸²æŸ“å›¾ç³»ç»Ÿï¼š
    - RenderGraphï¼šå¸§å›¾æ‰§è¡Œå™¨
    - RenderPassï¼šå•ä¸ªæ¸²æŸ“PassæŠ½è±¡
    - è‡ªåŠ¨èµ„æºä¾èµ–è·Ÿè¸ª
    - æ¯Passæè¿°ç¬¦ç¼“å­˜
  3. å…¶ä»–ç³»ç»Ÿï¼š
    - RendererCameraï¼šé€è§†ç›¸æœºï¼ˆè§†å›¾æŠ•å½±çŸ©é˜µã€FPSæ§åˆ¶ï¼‰
    - RendererSceneResourceManagerï¼šåœºæ™¯æ•°æ®ä¸æ¸²æŸ“çš„æ¡¥æ¥

  è®¾è®¡äº®ç‚¹ï¼š
  - å¥æŸ„è€Œéè£¸æŒ‡é’ˆï¼ˆé˜²æ­¢æ‚¬ç©ºæŒ‡é’ˆï¼‰
  - æ¸²æŸ“å›¾è‡ªåŠ¨ç®¡ç†èµ„æºç”Ÿå‘½å‘¨æœŸ
  - æè¿°ç¬¦æŒ‰Passç¼“å­˜æå‡æ€§èƒ½

  ---
  5. RendererDemo (åº”ç”¨å±‚)

  èŒè´£ï¼šæ¼”ç¤ºåº”ç”¨å’Œé«˜å±‚æ¸²æŸ“ç³»ç»Ÿ

  æ¶æ„æ¨¡å¼ï¼šç³»ç»Ÿ-æ¨¡å—æ¨¡å¼ï¼ˆç±»ECSè®¾è®¡ï¼‰

  ç»„ç»‡ç»“æ„ï¼š

  1. Demoåº”ç”¨ (DemoApps/)ï¼š
    - DemoBaseï¼šåº”ç”¨åŸºç±»ï¼ˆæ¸²æŸ“ä¸Šä¸‹æ–‡ã€å¸§å¾ªç¯ï¼‰
    - DemoAppModelViewerï¼šglTFæ¨¡å‹æŸ¥çœ‹å™¨
    - DemoTriangleAppï¼šç®€å•ä¸‰è§’å½¢Demo
  2. æ¸²æŸ“ç³»ç»Ÿ (RendererSystem/)ï¼š
    - RendererSystemSceneRendererï¼šåœºæ™¯æ¸²æŸ“ç³»ç»Ÿ
        - Base Passï¼ˆè¾“å‡ºï¼šé¢œè‰²ã€æ³•çº¿ã€æ·±åº¦ï¼‰
      - ç®¡ç†ç›¸æœºå’Œåœºæ™¯ç½‘æ ¼æ¨¡å—
    - RendererSystemLightingï¼šå…‰ç…§ç³»ç»Ÿ
        - é˜´å½±Passï¼ˆæ–¹å‘å…‰é˜´å½±ï¼‰
      - å»¶è¿Ÿå…‰ç…§Pass
      - VSMï¼ˆæ–¹å·®é˜´å½±å›¾ï¼‰æ”¯æŒ
  3. æ¸²æŸ“æ¨¡å— (RendererModule/)ï¼š
    - RendererModuleCameraï¼šç›¸æœºæ•°æ®ç»‘å®š
    - RendererModuleSceneMeshï¼šç½‘æ ¼æ•°æ®å’Œç»˜åˆ¶å‘½ä»¤
    - RendererModuleMaterialï¼šPBRæè´¨ç³»ç»Ÿ
    - RendererModuleLightingï¼šå…‰æºæ•°æ®ç®¡ç†

  ç³»ç»Ÿ-æ¨¡å—å…³ç³»ï¼š
  RendererSystemSceneRenderer
    â”œâ”€ RendererModuleCamera (è§†å›¾æŠ•å½±)
    â”œâ”€ RendererModuleSceneMesh (å‡ ä½•ä½“)
    â””â”€ RendererModuleMaterial (æè´¨)

  RendererSystemLighting
    â”œâ”€ RendererModuleLighting (å…‰æºæ•°æ®)
    â”œâ”€ RendererModuleCamera (é˜´å½±è§†å›¾)
    â””â”€ RendererModuleSceneMesh (é˜´å½±æŠ•å°„ç‰©)

  ---
  ğŸ”„ æ¸²æŸ“ç®¡çº¿æµç¨‹

  å¸§æ¸²æŸ“æµç¨‹ï¼š

  1. æ›´æ–°è¾“å…¥å’Œç›¸æœº
     â†“
  2. ç³»ç»ŸTickæ›´æ–°
     â”œâ”€ RendererSystemSceneRenderer::Tick()
     â”‚  â””â”€ Base Pass (è¾“å‡º: color, normal, depth)
     â””â”€ RendererSystemLighting::Tick()
        â”œâ”€ Shadow Pass (æ¯ä¸ªå…‰æº)
        â””â”€ Lighting Pass (å»¶è¿Ÿç€è‰²)
     â†“
  3. RenderGraphæ‰§è¡Œ
     â”œâ”€ ç»‘å®šç®¡çº¿çŠ¶æ€
     â”œâ”€ ç»‘å®šèµ„æºï¼ˆç¼“å†²ã€çº¹ç†ã€æè¿°ç¬¦ï¼‰
     â”œâ”€ æ‰§è¡Œç»˜åˆ¶å‘½ä»¤ (DrawIndexedInstanced)
     â””â”€ èµ„æºçŠ¶æ€è½¬æ¢
     â†“
  4. å¤åˆ¶åˆ°äº¤æ¢é“¾å¹¶Present

  å½“å‰æ”¯æŒçš„Passï¼š

  1. Base Passï¼šåœºæ™¯å‡ ä½•æ¸²æŸ“ï¼ˆG-Bufferï¼‰
  2. Shadow Passï¼šæ–¹å‘å…‰é˜´å½±å›¾ç”Ÿæˆ
  3. Lighting Passï¼šå»¶è¿Ÿå…‰ç…§ï¼ˆPBRç€è‰²ï¼‰

  ---
  ğŸ¨ å…³é”®è®¾è®¡æ¨¡å¼

  1. æŠ½è±¡å·¥å‚æ¨¡å¼ (RHI)ï¼šè¿è¡Œæ—¶é€‰æ‹©DX12/Vulkan
  2. å¥æŸ„æ¨¡å¼ (èµ„æºç®¡ç†)ï¼šç±»å‹å®‰å…¨ã€ç®€åŒ–ç”Ÿå‘½å‘¨æœŸç®¡ç†
  3. æ¸²æŸ“å›¾æ¨¡å¼ (æ¸²æŸ“)ï¼šè‡ªåŠ¨ä¾èµ–ç®¡ç†å’Œèµ„æºbarrier
  4. ç»„åˆæ¨¡å¼ (åœºæ™¯å›¾)ï¼šæ ‘å½¢å±‚æ¬¡ç»“æ„
  5. ç³»ç»Ÿ-ç»„ä»¶æ¨¡å¼ (åº”ç”¨å±‚)ï¼šç±»ä¼¼ECSçš„æ¶æ„
  6. è„æ ‡è®°æ¨¡å¼ (å˜æ¢)ï¼šå»¶è¿Ÿè®¡ç®—ä¼˜åŒ–

  ---
  ğŸ”— æ¨¡å—ä¾èµ–å›¾

                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ RendererDemo â”‚ (ç³»ç»Ÿã€æ¨¡å—ã€åº”ç”¨)
                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ RendererCore â”‚ (æ¸²æŸ“å›¾ã€Passã€èµ„æº)
                 â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
                    â”‚        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”    â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  RHICore   â”‚    â”‚ RendererScene  â”‚
        â”‚ (DX12/VK)  â”‚    â”‚  (åœºæ™¯å›¾)      â”‚
        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚             â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ RendererCommonLib   â”‚ (glTFåŠ è½½ã€çª—å£)
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ---
  ğŸ’¡ æŠ€æœ¯äº®ç‚¹

  1. åŒåç«¯æ”¯æŒï¼šDX12å’ŒVulkanç»Ÿä¸€æ¥å£
  2. å®ä¾‹åŒ–æ¸²æŸ“ï¼šæ‰€æœ‰ç½‘æ ¼ä½¿ç”¨å®ä¾‹åŒ–ç»˜åˆ¶
  3. åŸºäºç¼“å†²çš„é¡¶ç‚¹è·å–ï¼šé¡¶ç‚¹æ•°æ®å­˜å‚¨åœ¨ç»“æ„åŒ–ç¼“å†²ï¼ˆSRVï¼‰ä¸­ï¼Œç€è‰²å™¨æ‰‹åŠ¨è·å–
  4. PBRæè´¨ï¼šé‡‘å±/ç²—ç³™åº¦å·¥ä½œæµ
  5. å»¶è¿Ÿæ¸²æŸ“ï¼šG-Buffer + å»¶è¿Ÿå…‰ç…§
  6. é˜´å½±æ˜ å°„ï¼šæ–¹å‘å…‰VSMé˜´å½±
  7. å¥æŸ„ç³»ç»Ÿï¼šé˜²æ­¢å†…å­˜é”™è¯¯çš„èµ„æºè®¿é—®

  ---
  ğŸ“Š ä»£ç ä½ç½®å‚è€ƒ

  - RHIæ¥å£å®šä¹‰ï¼šRHICore/RHIInterface/*.h
  - åœºæ™¯å›¾ï¼šRendererScene/RendererSceneGraph.h:*
  - æ¸²æŸ“å›¾ï¼šRendererCore/RenderGraph.h:*
  - åœºæ™¯æ¸²æŸ“ç³»ç»Ÿï¼šRendererDemo/RendererSystem/RendererSystemSceneRenderer.cpp:*
  - å…‰ç…§ç³»ç»Ÿï¼šRendererDemo/RendererSystem/RendererSystemLighting.cpp:*

  ä½ çš„æ¸²æŸ“å™¨æ¶æ„éå¸¸æ¸…æ™°ï¼Œæ¨¡å—èŒè´£åˆ†æ˜ï¼Œæ˜¯ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„ç°ä»£æ¸²æŸ“å¼•æ“ï¼æœ‰ä»€ä¹ˆå…·ä½“çš„æ¨¡å—æˆ–è®¾è®¡ä½ æƒ³æ·±å…¥äº†è§£çš„å—ï¼Ÿ
